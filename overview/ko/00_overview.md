# Cross GameReward Protocol v2.0 - ê°œìš”

## ğŸ¯ í”„ë¡œì íŠ¸ ì†Œê°œ

Cross GameReward Protocolì€ Native CROSSì™€ ERC20 í† í°ì„ ìœ„í•œ **í™•ì¥ ê°€ëŠ¥í•œ ë‹¤ì¤‘ í’€ ë””íŒŒì§“ ì‹œìŠ¤í…œ**ì…ë‹ˆë‹¤.

---

## ğŸ—ï¸ ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜

### 4ê°œ í•µì‹¬ ì»´í¬ë„ŒíŠ¸

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          User                    â”‚
â”‚    (Native CROSS / ERC20)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CrossGameRewardRouter (CSR)      â”‚
â”‚   - depositNative/withdrawNative   â”‚
â”‚   - depositERC20/withdrawERC20     â”‚
â”‚   - ì¬ë°°í¬ ê°€ëŠ¥                  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â–º WCROSS (Router ì „ìš©)
       â”‚    - deposit/withdraw
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    CrossGameReward (CS)            â”‚
â”‚    - UUPS ì—…ê·¸ë ˆì´ë”ë¸”           â”‚
â”‚    - createPool (POOL_MANAGER)  â”‚
â”‚    - setRouter (ADMIN)          â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ creates
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  CrossGameRewardPool (CSP) Ã— n     â”‚
â”‚  - UUPS ì—…ê·¸ë ˆì´ë”ë¸”             â”‚
â”‚  - depositFor/withdrawFor          â”‚
â”‚  - rewardPerToken ëˆ„ì           â”‚
â”‚  - ë‹¤ì¤‘ ë³´ìƒ í† í°                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## âœ¨ ì£¼ìš” íŠ¹ì§•

### 1. Multi-Pool System
```
âœ… ë¬´ì œí•œ í’€ ìƒì„±
âœ… ê°™ì€ í† í°ë„ ì—¬ëŸ¬ í’€ ê°€ëŠ¥
âœ… í’€ë³„ ë…ë¦½ ìš´ì˜
```

### 2. Native Token ì§€ì›
```
âœ… Native CROSS ì§ì ‘ ë””íŒŒì§“
âœ… ìë™ ë˜í•‘/ì–¸ë˜í•‘
âœ… ì™„ë²½í•œ UX
```

### 3. Upgradeable
```
âœ… CrossGameReward: UUPS
âœ… CrossGameRewardPool: UUPS
âœ… Router: ì¬ë°°í¬ ê°€ëŠ¥
```

### 4. íš¨ìœ¨ì ì¸ ë³´ìƒ
```
âœ… rewardPerToken ëˆ„ì  ë°©ì‹
âœ… O(1) ê°€ìŠ¤ ë¹„ìš©
âœ… ìŠ¤í…Œì´ì»¤ ìˆ˜ ë¬´ê´€
```

---

## ğŸ“Š ê¸°ìˆ  ìŠ¤íƒ

- **Solidity**: 0.8.28
- **Framework**: Foundry
- **Libraries**: OpenZeppelin v5.4.0
- **Pattern**: Multi-Pool + rewardPerToken
- **Proxy**: UUPS

---

## ğŸ“š ë¬¸ì„œ êµ¬ì¡°

1. **[01_architecture.md](./01_architecture.md)** - ì‹œìŠ¤í…œ ì•„í‚¤í…ì²˜
2. **[02_reward_mechanism.md](./02_reward_mechanism.md)** - ë³´ìƒ ë©”ì»¤ë‹ˆì¦˜
3. **[03_security_and_testing.md](./03_security_and_testing.md)** - ë³´ì•ˆ ë° í…ŒìŠ¤íŠ¸

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘

### ì‚¬ìš©ì
```solidity
// Native CROSS ë””íŒŒì§“
router.depositNative{value: 100 ether}(poolId);

// ì–¸ë””íŒŒì§“
router.withdrawNative(poolId);
```

### ê´€ë¦¬ì
```solidity
// í’€ ìƒì„±
crossDeposit.createPool(wcross, 2 days);

// ë³´ìƒ í† í° ì¶”ê°€
crossDeposit.addRewardToken(poolId, usdt);
```

---

## ğŸ“ˆ ì„±ëŠ¥

- **í…ŒìŠ¤íŠ¸**: 212ê°œ 100% í†µê³¼
- **Gas**: ìµœì í™” ì™„ë£Œ
- **í¬ê¸°**: ëª¨ë‘ 24KB ì´í•˜
- **ë³´ì•ˆ**: ë‹¤ì¸µ ë°©ì–´ (reentrancy, access control, zero-deposit protection)

---

**ë‹¤ìŒ**: [01_architecture.md](./01_architecture.md)

